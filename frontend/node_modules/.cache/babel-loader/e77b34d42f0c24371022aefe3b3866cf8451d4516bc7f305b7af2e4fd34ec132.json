{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jejef\\\\OneDrive\\\\windsurf\\\\proyecto-vinculacion-acciones-QR\\\\frontend\\\\src\\\\components\\\\SignatureCanvas.js\",\n  _s = $RefreshSig$();\n/**\n * Componente de canvas para captura de firma electrónica\n * Permite dibujar y guardar firmas como base64\n */\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SignatureCanvas({\n  onSave,\n  onCancel\n}) {\n  _s();\n  const canvasRef = useRef();\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [isEmpty, setIsEmpty] = useState(true);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Configurar canvas\n    canvas.width = canvas.offsetWidth;\n    canvas.height = canvas.offsetHeight;\n\n    // Configurar estilo de dibujo\n    ctx.strokeStyle = '#000';\n    ctx.lineWidth = 2;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n\n    // Limpiar canvas con fondo blanco\n    ctx.fillStyle = '#fff';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n  }, []);\n\n  /**\n   * Obtiene coordenadas del evento (mouse o touch)\n   */\n  const getCoordinates = e => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    if (e.touches && e.touches.length > 0) {\n      // Touch event\n      return {\n        x: e.touches[0].clientX - rect.left,\n        y: e.touches[0].clientY - rect.top\n      };\n    } else {\n      // Mouse event\n      return {\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      };\n    }\n  };\n\n  /**\n   * Inicia el dibujo\n   */\n  const startDrawing = e => {\n    setIsDrawing(true);\n    const coords = getCoordinates(e);\n    const ctx = canvasRef.current.getContext('2d');\n    ctx.beginPath();\n    ctx.moveTo(coords.x, coords.y);\n\n    // Prevenir scroll en móviles\n    e.preventDefault();\n  };\n\n  /**\n   * Continúa el dibujo\n   */\n  const draw = e => {\n    if (!isDrawing) return;\n    const coords = getCoordinates(e);\n    const ctx = canvasRef.current.getContext('2d');\n    ctx.lineTo(coords.x, coords.y);\n    ctx.stroke();\n    setIsEmpty(false);\n\n    // Prevenir scroll en móviles\n    e.preventDefault();\n  };\n\n  /**\n   * Termina el dibujo\n   */\n  const stopDrawing = () => {\n    setIsDrawing(false);\n  };\n\n  /**\n   * Limpia el canvas\n   */\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = '#fff';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    setIsEmpty(true);\n  };\n\n  /**\n   * Guarda la firma como base64\n   */\n  const saveSignature = () => {\n    if (isEmpty) {\n      return;\n    }\n    const canvas = canvasRef.current;\n    const dataURL = canvas.toDataURL('image/png');\n    onSave(dataURL);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white border rounded-lg p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm font-medium text-gray-900 mb-1\",\n        children: \"Firma electr\\xF3nica\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-gray-600\",\n        children: \"Dibuja tu firma en el \\xE1rea de abajo usando el dedo o mouse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-2 border-dashed border-gray-300 rounded-lg p-2 mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"w-full h-32 touch-none cursor-crosshair\",\n        onMouseDown: startDrawing,\n        onMouseMove: draw,\n        onMouseUp: stopDrawing,\n        onMouseLeave: stopDrawing,\n        onTouchStart: startDrawing,\n        onTouchMove: draw,\n        onTouchEnd: stopDrawing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-xs text-gray-500 mb-3 text-center\",\n      children: \"\\uD83D\\uDCF1 En m\\xF3vil: usa tu dedo para firmar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: clearCanvas,\n        className: \"btn btn-secondary text-sm px-3 py-1 flex-1\",\n        disabled: isEmpty,\n        children: \"\\uD83D\\uDDD1\\uFE0F Limpiar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"btn btn-secondary text-sm px-3 py-1 flex-1\",\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: saveSignature,\n        className: \"btn btn-primary text-sm px-3 py-1 flex-1\",\n        disabled: isEmpty,\n        children: \"\\u2705 Guardar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n}\n_s(SignatureCanvas, \"1aQ9ZgvM+KgMfTqTXWJn3bHNs8o=\");\n_c = SignatureCanvas;\nexport default SignatureCanvas;\nvar _c;\n$RefreshReg$(_c, \"SignatureCanvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","SignatureCanvas","onSave","onCancel","_s","canvasRef","isDrawing","setIsDrawing","isEmpty","setIsEmpty","canvas","current","ctx","getContext","width","offsetWidth","height","offsetHeight","strokeStyle","lineWidth","lineCap","lineJoin","fillStyle","fillRect","getCoordinates","e","rect","getBoundingClientRect","touches","length","x","clientX","left","y","clientY","top","startDrawing","coords","beginPath","moveTo","preventDefault","draw","lineTo","stroke","stopDrawing","clearCanvas","saveSignature","dataURL","toDataURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","type","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/jejef/OneDrive/windsurf/proyecto-vinculacion-acciones-QR/frontend/src/components/SignatureCanvas.js"],"sourcesContent":["/**\n * Componente de canvas para captura de firma electrónica\n * Permite dibujar y guardar firmas como base64\n */\n\nimport React, { useRef, useEffect, useState } from 'react';\n\nfunction SignatureCanvas({ onSave, onCancel }) {\n  const canvasRef = useRef();\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [isEmpty, setIsEmpty] = useState(true);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // Configurar canvas\n    canvas.width = canvas.offsetWidth;\n    canvas.height = canvas.offsetHeight;\n    \n    // Configurar estilo de dibujo\n    ctx.strokeStyle = '#000';\n    ctx.lineWidth = 2;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    \n    // Limpiar canvas con fondo blanco\n    ctx.fillStyle = '#fff';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n  }, []);\n\n  /**\n   * Obtiene coordenadas del evento (mouse o touch)\n   */\n  const getCoordinates = (e) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    \n    if (e.touches && e.touches.length > 0) {\n      // Touch event\n      return {\n        x: e.touches[0].clientX - rect.left,\n        y: e.touches[0].clientY - rect.top\n      };\n    } else {\n      // Mouse event\n      return {\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      };\n    }\n  };\n\n  /**\n   * Inicia el dibujo\n   */\n  const startDrawing = (e) => {\n    setIsDrawing(true);\n    const coords = getCoordinates(e);\n    const ctx = canvasRef.current.getContext('2d');\n    \n    ctx.beginPath();\n    ctx.moveTo(coords.x, coords.y);\n    \n    // Prevenir scroll en móviles\n    e.preventDefault();\n  };\n\n  /**\n   * Continúa el dibujo\n   */\n  const draw = (e) => {\n    if (!isDrawing) return;\n    \n    const coords = getCoordinates(e);\n    const ctx = canvasRef.current.getContext('2d');\n    \n    ctx.lineTo(coords.x, coords.y);\n    ctx.stroke();\n    \n    setIsEmpty(false);\n    \n    // Prevenir scroll en móviles\n    e.preventDefault();\n  };\n\n  /**\n   * Termina el dibujo\n   */\n  const stopDrawing = () => {\n    setIsDrawing(false);\n  };\n\n  /**\n   * Limpia el canvas\n   */\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    ctx.fillStyle = '#fff';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    setIsEmpty(true);\n  };\n\n  /**\n   * Guarda la firma como base64\n   */\n  const saveSignature = () => {\n    if (isEmpty) {\n      return;\n    }\n    \n    const canvas = canvasRef.current;\n    const dataURL = canvas.toDataURL('image/png');\n    onSave(dataURL);\n  };\n\n  return (\n    <div className=\"bg-white border rounded-lg p-4\">\n      <div className=\"mb-3\">\n        <div className=\"text-sm font-medium text-gray-900 mb-1\">\n          Firma electrónica\n        </div>\n        <div className=\"text-xs text-gray-600\">\n          Dibuja tu firma en el área de abajo usando el dedo o mouse\n        </div>\n      </div>\n      \n      {/* Canvas para la firma */}\n      <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-2 mb-3\">\n        <canvas\n          ref={canvasRef}\n          className=\"w-full h-32 touch-none cursor-crosshair\"\n          onMouseDown={startDrawing}\n          onMouseMove={draw}\n          onMouseUp={stopDrawing}\n          onMouseLeave={stopDrawing}\n          onTouchStart={startDrawing}\n          onTouchMove={draw}\n          onTouchEnd={stopDrawing}\n        />\n      </div>\n      \n      {/* Instrucciones para móvil */}\n      <div className=\"text-xs text-gray-500 mb-3 text-center\">\n        📱 En móvil: usa tu dedo para firmar\n      </div>\n      \n      {/* Botones */}\n      <div className=\"flex gap-2\">\n        <button\n          type=\"button\"\n          onClick={clearCanvas}\n          className=\"btn btn-secondary text-sm px-3 py-1 flex-1\"\n          disabled={isEmpty}\n        >\n          🗑️ Limpiar\n        </button>\n        \n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"btn btn-secondary text-sm px-3 py-1 flex-1\"\n        >\n          Cancelar\n        </button>\n        \n        <button\n          type=\"button\"\n          onClick={saveSignature}\n          className=\"btn btn-primary text-sm px-3 py-1 flex-1\"\n          disabled={isEmpty}\n        >\n          ✅ Guardar\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default SignatureCanvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}