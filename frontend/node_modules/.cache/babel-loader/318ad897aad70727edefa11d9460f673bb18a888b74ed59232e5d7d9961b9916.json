{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jejef\\\\OneDrive\\\\windsurf\\\\proyecto-vinculacion-acciones-QR\\\\frontend\\\\src\\\\components\\\\QRScanner.js\",\n  _s = $RefreshSig$();\n/**\n * Componente de escáner de códigos QR\n * Usa la cámara del dispositivo para escanear QR\n */\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction QRScanner({\n  onResult,\n  onClose\n}) {\n  _s();\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const [error, setError] = useState('');\n  const [isScanning, setIsScanning] = useState(false);\n  const [facingMode, setFacingMode] = useState('environment'); // 'user' para frontal, 'environment' para trasera\n\n  useEffect(() => {\n    startCamera();\n    return () => stopCamera();\n  }, [facingMode]);\n\n  /**\n   * Inicia la cámara\n   */\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: facingMode,\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.play();\n        setIsScanning(true);\n        startScanning();\n      }\n    } catch (err) {\n      console.error('Error accediendo a la cámara:', err);\n      setError('No se puede acceder a la cámara. Verifica los permisos.');\n    }\n  };\n\n  /**\n   * Detiene la cámara\n   */\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      const tracks = videoRef.current.srcObject.getTracks();\n      tracks.forEach(track => track.stop());\n    }\n    setIsScanning(false);\n  };\n\n  /**\n   * Alterna entre cámara frontal y trasera\n   */\n  const switchCamera = () => {\n    stopCamera();\n    setFacingMode(prev => prev === 'user' ? 'environment' : 'user');\n  };\n\n  /**\n   * Inicia el proceso de escaneo\n   */\n  const startScanning = () => {\n    const scanInterval = setInterval(() => {\n      if (videoRef.current && canvasRef.current && videoRef.current.readyState === 4) {\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n\n        // Ajustar tamaño del canvas al video\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n\n        // Capturar frame actual\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n        // Simular detección de QR (en producción usar una librería como jsQR)\n        // Por ahora solo detectamos patrones básicos\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        const qrResult = detectQRPattern(imageData);\n        if (qrResult) {\n          clearInterval(scanInterval);\n          onResult(qrResult);\n        }\n      }\n    }, 500); // Escanear cada 500ms\n\n    // Limpiar interval después de 30 segundos\n    setTimeout(() => {\n      clearInterval(scanInterval);\n    }, 30000);\n  };\n\n  /**\n   * Función simulada de detección de QR\n   * En producción, usar una librería como jsQR o ZXing\n   */\n  const detectQRPattern = imageData => {\n    // Esta es una implementación simulada\n    // En la aplicación real, integrar con jsQR o similar\n\n    // Por ahora, retornar null (no detectado)\n    return null;\n  };\n\n  /**\n   * Manejo manual de entrada de QR para testing\n   */\n  const handleManualInput = () => {\n    const qrText = prompt('Ingresa el contenido del QR (para pruebas):');\n    if (qrText) {\n      onResult(qrText);\n    }\n  };\n\n  /**\n   * Simular QR válido para testing\n   */\n  const simulateValidQR = unitId => {\n    const mockQR = `https://scan.miapp.com/scan?unit_id=${unitId}&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9`;\n    onResult(mockQR);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black z-50 flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 bg-black text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"text-white text-lg\",\n        children: \"\\u2190 Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium\",\n        children: \"Escanear QR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: switchCamera,\n        className: \"text-white text-lg\",\n        children: \"\\uD83D\\uDD04\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 relative overflow-hidden\",\n      children: error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full bg-gray-900 text-white p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-400 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-12 h-12 mx-auto\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-4\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startCamera,\n            className: \"btn btn-primary\",\n            children: \"Reintentar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          className: \"w-full h-full object-cover\",\n          playsInline: true,\n          muted: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-64 h-64 border-2 border-white rounded-lg relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-blue-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-blue-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-blue-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-blue-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 left-0 w-full h-1 bg-blue-400 animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 text-center text-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: \"Apunta la c\\xE1mara hacia el c\\xF3digo QR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 19\n              }, this), isScanning && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-blue-300 mt-1\",\n                children: \"Escaneando...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-black\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-3 mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleManualInput,\n          className: \"btn btn-secondary text-sm py-2\",\n          children: \"\\u2328\\uFE0F Entrada Manual\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError(''),\n          className: \"btn btn-secondary text-sm py-2\",\n          children: \"\\uD83D\\uDCA1 Consejos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white text-xs mb-2\",\n          children: \"QRs de prueba:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-3 gap-2\",\n          children: ['UN001', 'UN002', 'UN003'].map(unitId => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => simulateValidQR(unitId),\n            className: \"btn btn-primary text-xs py-1\",\n            children: unitId\n          }, unitId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), error === '' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 max-w-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-bold mb-3\",\n          children: \"Consejos para escanear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"text-sm space-y-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 Mant\\xE9n el QR dentro del marco\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 Aseg\\xFArate de tener buena iluminaci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 Mant\\xE9n la c\\xE1mara estable\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 No acerques demasiado la c\\xE1mara\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError('fake'),\n          className: \"btn btn-primary btn-full\",\n          children: \"Entendido\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n}\n_s(QRScanner, \"0qTyYUkFqSJX0rKhjKHtMuRElk8=\");\n_c = QRScanner;\nexport default QRScanner;\nvar _c;\n$RefreshReg$(_c, \"QRScanner\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","QRScanner","onResult","onClose","_s","videoRef","canvasRef","error","setError","isScanning","setIsScanning","facingMode","setFacingMode","startCamera","stopCamera","stream","navigator","mediaDevices","getUserMedia","video","width","ideal","height","current","srcObject","play","startScanning","err","console","tracks","getTracks","forEach","track","stop","switchCamera","prev","scanInterval","setInterval","readyState","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","imageData","getImageData","qrResult","detectQRPattern","clearInterval","setTimeout","handleManualInput","qrText","prompt","simulateValidQR","unitId","mockQR","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","ref","playsInline","muted","map","_c","$RefreshReg$"],"sources":["C:/Users/jejef/OneDrive/windsurf/proyecto-vinculacion-acciones-QR/frontend/src/components/QRScanner.js"],"sourcesContent":["/**\n * Componente de escáner de códigos QR\n * Usa la cámara del dispositivo para escanear QR\n */\n\nimport React, { useEffect, useRef, useState } from 'react';\n\nfunction QRScanner({ onResult, onClose }) {\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const [error, setError] = useState('');\n  const [isScanning, setIsScanning] = useState(false);\n  const [facingMode, setFacingMode] = useState('environment'); // 'user' para frontal, 'environment' para trasera\n\n  useEffect(() => {\n    startCamera();\n    return () => stopCamera();\n  }, [facingMode]);\n\n  /**\n   * Inicia la cámara\n   */\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: facingMode,\n          width: { ideal: 1280 },\n          height: { ideal: 720 }\n        }\n      });\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.play();\n        setIsScanning(true);\n        startScanning();\n      }\n    } catch (err) {\n      console.error('Error accediendo a la cámara:', err);\n      setError('No se puede acceder a la cámara. Verifica los permisos.');\n    }\n  };\n\n  /**\n   * Detiene la cámara\n   */\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      const tracks = videoRef.current.srcObject.getTracks();\n      tracks.forEach(track => track.stop());\n    }\n    setIsScanning(false);\n  };\n\n  /**\n   * Alterna entre cámara frontal y trasera\n   */\n  const switchCamera = () => {\n    stopCamera();\n    setFacingMode(prev => prev === 'user' ? 'environment' : 'user');\n  };\n\n  /**\n   * Inicia el proceso de escaneo\n   */\n  const startScanning = () => {\n    const scanInterval = setInterval(() => {\n      if (videoRef.current && canvasRef.current && videoRef.current.readyState === 4) {\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n\n        // Ajustar tamaño del canvas al video\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n\n        // Capturar frame actual\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n        // Simular detección de QR (en producción usar una librería como jsQR)\n        // Por ahora solo detectamos patrones básicos\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        const qrResult = detectQRPattern(imageData);\n\n        if (qrResult) {\n          clearInterval(scanInterval);\n          onResult(qrResult);\n        }\n      }\n    }, 500); // Escanear cada 500ms\n\n    // Limpiar interval después de 30 segundos\n    setTimeout(() => {\n      clearInterval(scanInterval);\n    }, 30000);\n  };\n\n  /**\n   * Función simulada de detección de QR\n   * En producción, usar una librería como jsQR o ZXing\n   */\n  const detectQRPattern = (imageData) => {\n    // Esta es una implementación simulada\n    // En la aplicación real, integrar con jsQR o similar\n    \n    // Por ahora, retornar null (no detectado)\n    return null;\n  };\n\n  /**\n   * Manejo manual de entrada de QR para testing\n   */\n  const handleManualInput = () => {\n    const qrText = prompt('Ingresa el contenido del QR (para pruebas):');\n    if (qrText) {\n      onResult(qrText);\n    }\n  };\n\n  /**\n   * Simular QR válido para testing\n   */\n  const simulateValidQR = (unitId) => {\n    const mockQR = `https://scan.miapp.com/scan?unit_id=${unitId}&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9`;\n    onResult(mockQR);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black z-50 flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 bg-black text-white\">\n        <button onClick={onClose} className=\"text-white text-lg\">\n          ← Cancelar\n        </button>\n        <h3 className=\"text-lg font-medium\">Escanear QR</h3>\n        <button onClick={switchCamera} className=\"text-white text-lg\">\n          🔄\n        </button>\n      </div>\n\n      {/* Área de escaneo */}\n      <div className=\"flex-1 relative overflow-hidden\">\n        {error ? (\n          <div className=\"flex items-center justify-center h-full bg-gray-900 text-white p-4\">\n            <div className=\"text-center\">\n              <div className=\"text-red-400 mb-4\">\n                <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n              <p className=\"mb-4\">{error}</p>\n              <button\n                onClick={startCamera}\n                className=\"btn btn-primary\"\n              >\n                Reintentar\n              </button>\n            </div>\n          </div>\n        ) : (\n          <>\n            {/* Video de la cámara */}\n            <video\n              ref={videoRef}\n              className=\"w-full h-full object-cover\"\n              playsInline\n              muted\n            />\n\n            {/* Canvas oculto para procesamiento */}\n            <canvas\n              ref={canvasRef}\n              className=\"hidden\"\n            />\n\n            {/* Overlay de escaneo */}\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <div className=\"relative\">\n                {/* Marco de escaneo */}\n                <div className=\"w-64 h-64 border-2 border-white rounded-lg relative\">\n                  {/* Esquinas del marco */}\n                  <div className=\"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-blue-400\"></div>\n                  <div className=\"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-blue-400\"></div>\n                  <div className=\"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-blue-400\"></div>\n                  <div className=\"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-blue-400\"></div>\n                  \n                  {/* Línea de escaneo animada */}\n                  <div className=\"absolute top-0 left-0 w-full h-1 bg-blue-400 animate-pulse\"></div>\n                </div>\n\n                {/* Instrucciones */}\n                <div className=\"mt-4 text-center text-white\">\n                  <p className=\"text-sm\">\n                    Apunta la cámara hacia el código QR\n                  </p>\n                  {isScanning && (\n                    <p className=\"text-xs text-blue-300 mt-1\">\n                      Escaneando...\n                    </p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* Footer con opciones */}\n      <div className=\"p-4 bg-black\">\n        <div className=\"grid grid-cols-2 gap-3 mb-3\">\n          <button\n            onClick={handleManualInput}\n            className=\"btn btn-secondary text-sm py-2\"\n          >\n            ⌨️ Entrada Manual\n          </button>\n          <button\n            onClick={() => setError('')}\n            className=\"btn btn-secondary text-sm py-2\"\n          >\n            💡 Consejos\n          </button>\n        </div>\n\n        {/* QRs de prueba */}\n        <div className=\"text-center\">\n          <p className=\"text-white text-xs mb-2\">QRs de prueba:</p>\n          <div className=\"grid grid-cols-3 gap-2\">\n            {['UN001', 'UN002', 'UN003'].map(unitId => (\n              <button\n                key={unitId}\n                onClick={() => simulateValidQR(unitId)}\n                className=\"btn btn-primary text-xs py-1\"\n              >\n                {unitId}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Modal de consejos */}\n      {error === '' && (\n        <div className=\"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-10\">\n          <div className=\"bg-white rounded-lg p-6 max-w-sm\">\n            <h4 className=\"font-bold mb-3\">Consejos para escanear</h4>\n            <ul className=\"text-sm space-y-2 mb-4\">\n              <li>• Mantén el QR dentro del marco</li>\n              <li>• Asegúrate de tener buena iluminación</li>\n              <li>• Mantén la cámara estable</li>\n              <li>• No acerques demasiado la cámara</li>\n            </ul>\n            <button\n              onClick={() => setError('fake')}\n              className=\"btn btn-primary btn-full\"\n            >\n              Entendido\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default QRScanner;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}